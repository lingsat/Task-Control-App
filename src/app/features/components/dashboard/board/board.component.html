<ng-container *ngIf="formsService.showAddTaskForm">
  <app-add-task-form></app-add-task-form>
</ng-container>
<div class="content">
  <h2 class="content__title">{{ boardName }}</h2>
  <div class="content__controls">
    <form class="controls__form" #boardControlForm="ngForm">
      <fieldset class="controls__fieldset">
        <label for="filter">Filter</label>
        <input type="text" name="filter" id="filter" placeholder="Search..." [(ngModel)]="searchText">
      </fieldset>
      <fieldset class="controls__fieldset">
        <label for="sort">Sort by</label>
        <select name="sort" id="sort" [(ngModel)]="sortValue">
          <option value="none" disabled>---</option>
          <option value="createdDate">Date</option>
          <option value="name">Name</option>
        </select>
      </fieldset>
      <fieldset class="controls__fieldset">
        <label for="order">Order by</label>
        <select name="order" id="order" [(ngModel)]="sortOrder">
          <option value="asc">Ascending</option>
          <option value="desc">Descending</option>
        </select>
      </fieldset>
    </form>
  </div>
</div>

<div class="board__block">
  <div class="board__column">
    <h3 class="board__subtitle">ToDo</h3>
    <div class="board__card">
      <button type="button" class="board__add" (click)="onOpenAddTaskForm()">
        +
      </button>
      <div
        class="tasks__container"
        (dragover)="$event.preventDefault()"
        (drop)="onDrop('todo')"
      >
        <div
          class="task__item"
          *ngFor="let task of todoTasks | filtering: searchText | sorting: sortValue: sortOrder"
          draggable="true"
          (dragstart)="onDragStart(task)"
        >
          <app-task [task]="task"></app-task>
        </div>
      </div>
    </div>
  </div>
  <div class="board__column">
    <h3 class="board__subtitle">In Progress</h3>
    <div class="board__card">
      <button type="button" class="board__add" (click)="onOpenAddTaskForm()">
        +
      </button>
      <div
        class="tasks__container"
        (dragover)="$event.preventDefault()"
        (drop)="onDrop('progress')"
      >
        <div
          class="task__item"
          *ngFor="let task of progressTasks | filtering: searchText | sorting: sortValue: sortOrder"
          draggable="true"
          (dragstart)="onDragStart(task)"
        >
          <app-task [task]="task"></app-task>
        </div>
      </div>
    </div>
  </div>
  <div class="board__column">
    <h3 class="board__subtitle">Done</h3>
    <div class="board__card">
      <button type="button" class="board__add" (click)="onOpenAddTaskForm()">
        +
      </button>
      <div
        class="tasks__container"
        (dragover)="$event.preventDefault()"
        (drop)="onDrop('done')"
      >
        <div
          class="task__item"
          *ngFor="let task of doneTasks | filtering: searchText | sorting: sortValue: sortOrder"
          draggable="true"
          (dragstart)="onDragStart(task)"
        >
          <app-task [task]="task"></app-task>
        </div>
      </div>
    </div>
  </div>
</div>
